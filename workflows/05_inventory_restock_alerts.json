{
  "name": "📦 Smart Inventory Restock Alerts - Multi-Platform",
  "nodes": [
    {
      "parameters": {
        "rule": {
          "interval": [
            {
              "field": "hours",
              "hoursInterval": 4
            }
          ]
        }
      },
      "id": "inventory-cron",
      "name": "Every 4 Hours Check",
      "type": "n8n-nodes-base.cron",
      "typeVersion": 1,
      "position": [240, 300],
      "notes": "🔥 DEMO: Prevents costly stockouts\n💰 ROI: $10,000+ saved per stockout\n⚡ Impact: Proactive inventory management"
    },
    {
      "parameters": {
        "model": "gemini-2.0-flash-exp",
        "prompt": "=You are an expert inventory management AI. Analyze this inventory data and predict restock needs.\n\nInventory Data: {{JSON.stringify($json, null, 2)}}\n\nConsider these factors:\n1. **Current Stock Levels**: Actual vs minimum thresholds\n2. **Sales Velocity**: Daily/weekly sales rates by SKU\n3. **Seasonality**: Upcoming events, holidays, trends\n4. **Lead Times**: Supplier delivery schedules\n5. **Safety Stock**: Buffer for demand spikes\n6. **Cost Optimization**: Bulk order discounts vs carrying costs\n\nFor each SKU, calculate:\n- Days of inventory remaining\n- Recommended reorder date\n- Optimal order quantity\n- Priority level (Critical/High/Medium/Low)\n- Cost impact if out of stock\n\nReturn JSON array with restock recommendations including reasoning for each decision.",
        "options": {
          "temperature": 0.2,
          "maxTokens": 2000
        }
      },
      "id": "inventory-ai",
      "name": "🧠 AI Inventory Analysis",
      "type": "@n8n/n8n-nodes-langchain.openAi",
      "typeVersion": 1.3,
      "position": [460, 300],
      "notes": "🎯 Predicts optimal restock timing\n📊 Analyzes sales velocity patterns\n💡 Prevents stockouts before they happen"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict"
          },
          "conditions": [
            {
              "id": "critical-stock",
              "leftValue": "={{$json.priority_level}}",
              "rightValue": "Critical",
              "operator": {
                "type": "string",
                "operation": "equals"
              }
            },
            {
              "id": "high-priority",
              "leftValue": "={{$json.priority_level}}",
              "rightValue": "High", 
              "operator": {
                "type": "string",
                "operation": "equals"
              }
            }
          ],
          "combineOperation": "any"
        },
        "options": {}
      },
      "id": "priority-filter",
      "name": "🚨 High Priority Items",
      "type": "n8n-nodes-base.filter",
      "typeVersion": 2,
      "position": [680, 300],
      "notes": "Only processes critical & high priority restocks"
    },
    {
      "parameters": {
        "select": "channel",
        "channelId": {
          "__rl": true,
          "value": "C1234567893",
          "mode": "list",
          "cachedResultName": "inventory-alerts"
        },
        "text": "=🚨 **URGENT INVENTORY ALERT**\n\n**{{$json.sku}}** - {{$json.product_name}}\n📦 **Current Stock**: {{$json.current_quantity}} units\n⏰ **Days Remaining**: {{$json.days_remaining}}\n🎯 **Reorder By**: {{$json.recommended_reorder_date}}\n📈 **Order Quantity**: {{$json.optimal_order_quantity}} units\n💰 **Potential Loss**: ${{$json.stockout_cost_impact}}\n\n**AI Reasoning:**\n{{$json.reasoning}}\n\n{{$json.priority_level === 'Critical' ? '🔴 **CRITICAL - ORDER TODAY**' : '🟡 **HIGH PRIORITY - ORDER THIS WEEK**'}}",
        "otherOptions": {}
      },
      "id": "slack-alert",
      "name": "📱 Slack Inventory Alert",
      "type": "n8n-nodes-base.slack",
      "typeVersion": 2.1,
      "position": [900, 300],
      "notes": "🔔 Instant team notifications\n⚡ Prevents costly stockouts\n📊 Includes reorder recommendations"
    },
    {
      "parameters": {
        "to": "purchasing@company.com,operations@company.com",
        "subject": "📦 Automated Purchase Order Recommendation - {{$json.sku}}",
        "emailType": "html",
        "message": "=<h2>🚨 Purchase Order Needed</h2>\n<table style='border-collapse:collapse;width:100%'>\n  <tr style='background:#f8f9fa'><td><strong>Product:</strong></td><td>{{$json.product_name}}</td></tr>\n  <tr><td><strong>SKU:</strong></td><td>{{$json.sku}}</td></tr>\n  <tr style='background:#f8f9fa'><td><strong>Current Stock:</strong></td><td>{{$json.current_quantity}} units</td></tr>\n  <tr><td><strong>Days Remaining:</strong></td><td>{{$json.days_remaining}} days</td></tr>\n  <tr style='background:#fff3cd'><td><strong>Recommended Order:</strong></td><td>{{$json.optimal_order_quantity}} units</td></tr>\n  <tr style='background:#d4edda'><td><strong>Order By Date:</strong></td><td>{{$json.recommended_reorder_date}}</td></tr>\n</table>\n\n<h3>💡 AI Analysis</h3>\n<p>{{$json.reasoning}}</p>\n\n<h3>📊 Financial Impact</h3>\n<ul>\n  <li><strong>Stockout Risk:</strong> ${{$json.stockout_cost_impact}}</li>\n  <li><strong>Order Value:</strong> ${{$json.order_value_estimate}}</li>\n  <li><strong>Supplier:</strong> {{$json.preferred_supplier}}</li>\n</ul>\n\n<div style='background:#e74c3c;color:white;padding:15px;text-align:center;margin:20px 0'>\n  <strong>{{$json.priority_level}} PRIORITY - ACTION REQUIRED</strong>\n</div>"
      },
      "id": "purchase-order-email",
      "name": "📧 Purchase Order Email",
      "type": "n8n-nodes-base.emailSend",
      "typeVersion": 2.1,
      "position": [1120, 300],
      "notes": "📧 Detailed purchase recommendations\n💰 Financial impact analysis\n⏰ Clear action timelines"
    }
  ],
  "connections": {
    "Every 4 Hours Check": {
      "main": [
        [
          {
            "node": "🧠 AI Inventory Analysis",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "🧠 AI Inventory Analysis": {
      "main": [
        [
          {
            "node": "🚨 High Priority Items",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "🚨 High Priority Items": {
      "main": [
        [
          {
            "node": "📱 Slack Inventory Alert",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "📱 Slack Inventory Alert": {
      "main": [
        [
          {
            "node": "📧 Purchase Order Email",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "pinData": {},
  "settings": {
    "executionOrder": "v1"
  },
  "staticData": null,
  "tags": [
    {
      "createdAt": "2024-12-30T10:00:00.000Z",
      "updatedAt": "2024-12-30T10:00:00.000Z",
      "id": "inventory-management",
      "name": "Inventory Management"
    }
  ],
  "triggerCount": 1,
  "updatedAt": "2024-12-30T10:00:00.000Z",
  "versionId": "1.0.0"
}